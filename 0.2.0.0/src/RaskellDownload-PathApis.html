<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<head>
<!-- Generated by HsColour, http://code.haskell.org/~malcolm/hscolour/ -->
<title>src/RaskellDownload/PathApis.hs</title>
<link type='text/css' rel='stylesheet' href='hscolour.css' />
</head>
<body>
<pre><a name="line-1"></a><span class='hs-comment'>-- | Module for RaskellDownload providing a collection of PathApis</span>
<a name="line-2"></a><span class='hs-keyword'>module</span> <span class='hs-conid'>RaskellDownload</span><span class='hs-varop'>.</span><span class='hs-conid'>PathApis</span> <span class='hs-keyword'>where</span>
<a name="line-3"></a>
<a name="line-4"></a><span class='hs-keyword'>import</span> <span class='hs-conid'>RaskellDownload</span><span class='hs-varop'>.</span><span class='hs-conid'>Internal</span><span class='hs-layout'>(</span><span class='hs-conid'>PathApi</span><span class='hs-layout'>(</span><span class='hs-keyglyph'>..</span><span class='hs-layout'>)</span><span class='hs-layout'>,</span> <span class='hs-varid'>intercalate</span><span class='hs-layout'>)</span>
<a name="line-5"></a><span class='hs-keyword'>import</span> <span class='hs-conid'>Data</span><span class='hs-varop'>.</span><span class='hs-conid'>Maybe</span> <span class='hs-layout'>(</span><span class='hs-varid'>fromMaybe</span><span class='hs-layout'>)</span>
<a name="line-6"></a>
<a name="line-7"></a><a name="githubApiV3"></a><span class='hs-comment'>-- | Path API for github server using the github API v3 (&lt;https://developer.github.com/v3/&gt;)</span>
<a name="line-8"></a><span class='hs-definition'>githubApiV3</span> <span class='hs-keyglyph'>=</span> <span class='hs-conid'>PathApi</span><span class='hs-layout'>{</span> <span class='hs-varid'>rawUrl</span> <span class='hs-keyglyph'>=</span> <span class='hs-keyword'>let</span> <span class='hs-varid'>url</span> <span class='hs-varid'>owner</span> <span class='hs-varid'>repo</span> <span class='hs-varid'>path</span> <span class='hs-varid'>branch</span> <span class='hs-varid'>token</span> <span class='hs-keyglyph'>=</span>
<a name="line-9"></a>                                       <span class='hs-varid'>intercalate</span> <span class='hs-str'>"/"</span> <span class='hs-keyglyph'>[</span><span class='hs-str'>"https://api.github.com/repos"</span><span class='hs-layout'>,</span><span class='hs-varid'>owner</span><span class='hs-layout'>,</span><span class='hs-varid'>repo</span><span class='hs-layout'>,</span><span class='hs-str'>"contents"</span><span class='hs-layout'>,</span><span class='hs-varid'>path</span><span class='hs-varop'>++</span> <span class='hs-varid'>parameters</span><span class='hs-keyglyph'>]</span>
<a name="line-10"></a>                                     <span class='hs-keyword'>where</span> <span class='hs-varid'>parameters</span> <span class='hs-keyglyph'>|</span> <span class='hs-varid'>null</span> <span class='hs-varid'>parameterlist</span> <span class='hs-keyglyph'>=</span> <span class='hs-str'>""</span>  
<a name="line-11"></a>                                                      <span class='hs-keyglyph'>|</span> <span class='hs-varid'>otherwise</span>          <span class='hs-keyglyph'>=</span> <span class='hs-chr'>'?'</span><span class='hs-conop'>:</span><span class='hs-varid'>intercalate</span> <span class='hs-str'>"&amp;"</span> <span class='hs-varid'>parameterlist</span>
<a name="line-12"></a>                                           <span class='hs-varid'>parameterlist</span> <span class='hs-keyglyph'>=</span> <span class='hs-varid'>branchlist</span> <span class='hs-varop'>++</span> <span class='hs-varid'>authlist</span> 
<a name="line-13"></a>                                           <span class='hs-varid'>branchlist</span>    <span class='hs-keyglyph'>=</span> <span class='hs-varid'>maybe</span> <span class='hs-conid'>[]</span> <span class='hs-layout'>(</span><span class='hs-keyword'>let</span> <span class='hs-varid'>f</span> <span class='hs-varid'>b</span> <span class='hs-keyglyph'>=</span> <span class='hs-keyglyph'>[</span><span class='hs-str'>"ref="</span><span class='hs-varop'>++</span><span class='hs-varid'>b</span><span class='hs-keyglyph'>]</span> <span class='hs-keyword'>in</span> <span class='hs-varid'>f</span><span class='hs-layout'>)</span> <span class='hs-varid'>branch</span> 
<a name="line-14"></a>                                           <span class='hs-varid'>authlist</span>      <span class='hs-keyglyph'>=</span> <span class='hs-varid'>maybe</span> <span class='hs-conid'>[]</span> <span class='hs-layout'>(</span><span class='hs-keyword'>let</span> <span class='hs-varid'>f</span> <span class='hs-varid'>t</span> <span class='hs-keyglyph'>=</span> <span class='hs-keyglyph'>[</span><span class='hs-str'>"access_token="</span><span class='hs-varop'>++</span><span class='hs-varid'>t</span><span class='hs-keyglyph'>]</span> <span class='hs-keyword'>in</span> <span class='hs-varid'>f</span><span class='hs-layout'>)</span> <span class='hs-varid'>token</span>
<a name="line-15"></a>                                <span class='hs-keyword'>in</span> <span class='hs-varid'>url</span><span class='hs-layout'>,</span>
<a name="line-16"></a>                        <span class='hs-varid'>toRawContents</span> <span class='hs-keyglyph'>=</span> <span class='hs-varid'>error</span> <span class='hs-str'>"not implemented yet"</span>
<a name="line-17"></a>                     <span class='hs-layout'>}</span>
<a name="line-18"></a>
<a name="line-19"></a><a name="gogsApiRaw"></a><span class='hs-comment'>-- | Path API for gogs git server (&lt;https://gogs.io/&gt;)</span>
<a name="line-20"></a><span class='hs-definition'>gogsApiRaw</span> <span class='hs-varid'>server</span> <span class='hs-keyglyph'>=</span> <span class='hs-conid'>PathApi</span><span class='hs-layout'>{</span> <span class='hs-varid'>rawUrl</span> <span class='hs-keyglyph'>=</span> <span class='hs-keyword'>let</span> <span class='hs-varid'>url</span> <span class='hs-varid'>owner</span> <span class='hs-varid'>repo</span> <span class='hs-varid'>path</span> <span class='hs-varid'>branch</span> <span class='hs-varid'>token</span> <span class='hs-keyglyph'>=</span>
<a name="line-21"></a>                                             <span class='hs-varid'>intercalate</span> <span class='hs-str'>"/"</span> <span class='hs-keyglyph'>[</span><span class='hs-str'>"https:/"</span><span class='hs-layout'>,</span><span class='hs-varid'>server</span><span class='hs-layout'>,</span><span class='hs-str'>"api"</span><span class='hs-layout'>,</span><span class='hs-str'>"v1"</span><span class='hs-layout'>,</span><span class='hs-str'>"repos"</span><span class='hs-layout'>,</span><span class='hs-varid'>owner</span><span class='hs-layout'>,</span><span class='hs-varid'>repo</span><span class='hs-layout'>,</span><span class='hs-str'>"raw"</span><span class='hs-layout'>,</span><span class='hs-varid'>branchname</span><span class='hs-layout'>,</span><span class='hs-varid'>path</span><span class='hs-varop'>++</span><span class='hs-varid'>authtoken</span><span class='hs-keyglyph'>]</span>
<a name="line-22"></a>                                           <span class='hs-keyword'>where</span> <span class='hs-varid'>branchname</span> <span class='hs-keyglyph'>=</span> <span class='hs-varid'>fromMaybe</span> <span class='hs-str'>"master"</span> <span class='hs-varid'>branch</span> 
<a name="line-23"></a>                                                 <span class='hs-varid'>authtoken</span>  <span class='hs-keyglyph'>=</span> <span class='hs-varid'>maybe</span> <span class='hs-str'>""</span> <span class='hs-layout'>(</span><span class='hs-keyword'>let</span> <span class='hs-varid'>f</span> <span class='hs-varid'>t</span> <span class='hs-keyglyph'>=</span> <span class='hs-str'>"?token="</span><span class='hs-varop'>++</span><span class='hs-varid'>t</span> <span class='hs-keyword'>in</span> <span class='hs-varid'>f</span><span class='hs-layout'>)</span> <span class='hs-varid'>token</span>
<a name="line-24"></a>                                      <span class='hs-keyword'>in</span> <span class='hs-varid'>url</span><span class='hs-layout'>,</span>
<a name="line-25"></a>                        <span class='hs-varid'>toRawContents</span> <span class='hs-keyglyph'>=</span> <span class='hs-varid'>id</span>
<a name="line-26"></a>                     <span class='hs-layout'>}</span>
</pre></body>
</html>
